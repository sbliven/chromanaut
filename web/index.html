<!doctype HTML>
<html>
    <head>
        <title>Color Explorer</title>
        
        <link rel="stylesheet" href="assets/css/bootstrap.min.css" />

        
        <link rel="stylesheet" href="assets/css/colorexplorer.css" />
        
        <script src="colorexplorer.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col">
                    <canvas id="colorpicker2d" width="400" height="200"
style="border:1px solid #000000;">
                    </canvas>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <canvas id="colorpicker1d" width="400" height="10"
style="border:1px solid #000000;">
                    </canvas>
                </div>
            </div>
            <div class="row">
                <form>
                    <div class="col">
                        <label for="axis1">R</label>
                        <input type="text" name="axis1" id="axis1" value="0" size="4"></input>
                        <label for="axis2">G</label>
                        <input type="text" name="axis2" id="axis2" value="0" size="4"></input>
                        <label for="axis3">B</label>
                        <input type="text" name="axis3" id="axis3" value="0" size="4"></input>
                    </div>
                </form>
            </div>
        </div>

        
        <script src="assets/js/jquery-3.3.1.slim.min.js"></script>
        <script src="assets/js/popper.min.js"></script>
        <script src="assets/js/bootstrap.min.js" ></script>
        <script>
var picker = null;
$(document).ready( function() {
    let canvas2 = document.getElementById("colorpicker2d");
    let canvas1 = document.getElementById("colorpicker1d");
    
    picker = rgbPicker(canvas1, canvas2);
    
    picker.space.addEventListener('colorselected', function(e) {
        let color = e.detail.color;
        $("#axis1").val(color[0]);
        $("#axis2").val(color[1]);
        $("#axis3").val(color[2]);
    });
    
    function parseColor(colorStr) {
        let color = colorStr.map(parseFloat);
        if( color.findIndex(isNaN) < 0 ) {
            return color;
        } else {
            return null;
        }
    }
    function updateColorFromForm(evt) {
        let colorStr = [
            $("#axis1").val(),
            $("#axis2").val(),
            $("#axis3").val()
        ];
        let color = parseColor(colorStr);
        if( color ) {
            picker.space.selection = color;
        }
    }
    
    $("#axis1").on('change', updateColorFromForm);
    $("#axis2").on('change', updateColorFromForm);
    $("#axis3").on('change', updateColorFromForm);
    

});
        </script>
    </body>
</html>